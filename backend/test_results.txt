=========================================
üß™ TESTES - GERENCIAMENTO DE VAGAS
=========================================

üîê Fazendo login...
[0;32m‚úÖ Login realizado com sucesso[0m

üìö Criando curso de teste...
Curso criado com ID: 

üè´ Criando turma com 5 vagas...
Turma criada com ID: 
Vagas iniciais: 

üë§ Criando aluno de teste...
jq: parse error: Invalid numeric literal at line 1, column 10
Aluno criado com ID: 

TEST 1: Verificar vagas iniciais da turma
jq: error (at <stdin>:1): Cannot index array with string "data"
jq: error (at <stdin>:1): Cannot index array with string "data"
Vagas antes: 
[0;31m‚ùå FALHOU:[0m Verificar vagas iniciais (5)
   Esperado: 5
   Recebido: 
   Response: [{"id":1,"nome":"Turma Python 2025-1","turno":"MATUTINO","data_inicio":"2025-01-15","data_fim":"2025-03-15","id_curso":1,"vagas":30,"createdAt":"2025-11-03T06:22:03.000Z","updatedAt":"2025-11-03T06:22:03.000Z","curso":{"id":1,"nome":"Python para Iniciantes","carga_horaria":40}},{"id":5,"nome":"Turma JS 2025 - Noturna","turno":"NOITE","data_inicio":"2025-11-01","data_fim":"2026-05-01","id_curso":10,"vagas":30,"createdAt":"2025-10-27T19:28:17.000Z","updatedAt":"2025-10-27T19:28:17.000Z","curso":{"id":10,"nome":"JavaScript Fullstack","carga_horaria":80}},{"id":3,"nome":"Turma Test 1761587926","turno":"NOITE","data_inicio":"2024-01-15","data_fim":"2024-06-15","id_curso":8,"vagas":30,"createdAt":"2025-10-27T17:58:46.000Z","updatedAt":"2025-10-27T17:58:46.000Z","curso":{"id":8,"nome":"Test Course 1761587926","carga_horaria":40}},{"id":2,"nome":"Turma A - JavaScript Avan√ßado","turno":"MANHA","data_inicio":"2024-02-01","data_fim":"2024-07-01","id_curso":7,"vagas":30,"createdAt":"2025-10-27T17:58:30.000Z","updatedAt":"2025-10-27T18:44:10.000Z","curso":{"id":7,"nome":"Test Course 1761587910","carga_horaria":40}}]

TEST 2: Criar matr√≠cula (deve decrementar vagas)
Response matr√≠cula: {"message":"Internal server error"}
jq: error (at <stdin>:1): Cannot index array with string "data"
Vagas depois de criar matr√≠cula: 
[0;31m‚ùå FALHOU:[0m Criar matr√≠cula decrementa vagas (4)
   Esperado: 4
   Recebido: 
   Response: [{"id":1,"nome":"Turma Python 2025-1","turno":"MATUTINO","data_inicio":"2025-01-15","data_fim":"2025-03-15","id_curso":1,"vagas":30,"createdAt":"2025-11-03T06:22:03.000Z","updatedAt":"2025-11-03T06:22:03.000Z","curso":{"id":1,"nome":"Python para Iniciantes","carga_horaria":40}},{"id":5,"nome":"Turma JS 2025 - Noturna","turno":"NOITE","data_inicio":"2025-11-01","data_fim":"2026-05-01","id_curso":10,"vagas":30,"createdAt":"2025-10-27T19:28:17.000Z","updatedAt":"2025-10-27T19:28:17.000Z","curso":{"id":10,"nome":"JavaScript Fullstack","carga_horaria":80}},{"id":3,"nome":"Turma Test 1761587926","turno":"NOITE","data_inicio":"2024-01-15","data_fim":"2024-06-15","id_curso":8,"vagas":30,"createdAt":"2025-10-27T17:58:46.000Z","updatedAt":"2025-10-27T17:58:46.000Z","curso":{"id":8,"nome":"Test Course 1761587926","carga_horaria":40}},{"id":2,"nome":"Turma A - JavaScript Avan√ßado","turno":"MANHA","data_inicio":"2024-02-01","data_fim":"2024-07-01","id_curso":7,"vagas":30,"createdAt":"2025-10-27T17:58:30.000Z","updatedAt":"2025-10-27T18:44:10.000Z","curso":{"id":7,"nome":"Test Course 1761587910","carga_horaria":40}}]

TEST 3: Cancelar matr√≠cula (deve incrementar vagas)
jq: parse error: Invalid numeric literal at line 1, column 10
Response cancelamento: <!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<title>Error</title>
</head>
<body>
<pre>Cannot PATCH /api/enrollments///cancel</pre>
</body>
</html>
jq: error (at <stdin>:1): Cannot index array with string "data"
Vagas depois de cancelar matr√≠cula: 
[0;31m‚ùå FALHOU:[0m Cancelar matr√≠cula incrementa vagas (5)
   Esperado: 5
   Recebido: 
   Response: [{"id":1,"nome":"Turma Python 2025-1","turno":"MATUTINO","data_inicio":"2025-01-15","data_fim":"2025-03-15","id_curso":1,"vagas":30,"createdAt":"2025-11-03T06:22:03.000Z","updatedAt":"2025-11-03T06:22:03.000Z","curso":{"id":1,"nome":"Python para Iniciantes","carga_horaria":40}},{"id":5,"nome":"Turma JS 2025 - Noturna","turno":"NOITE","data_inicio":"2025-11-01","data_fim":"2026-05-01","id_curso":10,"vagas":30,"createdAt":"2025-10-27T19:28:17.000Z","updatedAt":"2025-10-27T19:28:17.000Z","curso":{"id":10,"nome":"JavaScript Fullstack","carga_horaria":80}},{"id":3,"nome":"Turma Test 1761587926","turno":"NOITE","data_inicio":"2024-01-15","data_fim":"2024-06-15","id_curso":8,"vagas":30,"createdAt":"2025-10-27T17:58:46.000Z","updatedAt":"2025-10-27T17:58:46.000Z","curso":{"id":8,"nome":"Test Course 1761587926","carga_horaria":40}},{"id":2,"nome":"Turma A - JavaScript Avan√ßado","turno":"MANHA","data_inicio":"2024-02-01","data_fim":"2024-07-01","id_curso":7,"vagas":30,"createdAt":"2025-10-27T17:58:30.000Z","updatedAt":"2025-10-27T18:44:10.000Z","curso":{"id":7,"nome":"Test Course 1761587910","carga_horaria":40}}]

TEST 4: Criar matr√≠cula novamente
jq: error (at <stdin>:1): Cannot index array with string "data"
Vagas depois de criar matr√≠cula novamente: 
[0;31m‚ùå FALHOU:[0m Segunda matr√≠cula decrementa vagas (4)
   Esperado: 4
   Recebido: 
   Response: [{"id":1,"nome":"Turma Python 2025-1","turno":"MATUTINO","data_inicio":"2025-01-15","data_fim":"2025-03-15","id_curso":1,"vagas":30,"createdAt":"2025-11-03T06:22:03.000Z","updatedAt":"2025-11-03T06:22:03.000Z","curso":{"id":1,"nome":"Python para Iniciantes","carga_horaria":40}},{"id":5,"nome":"Turma JS 2025 - Noturna","turno":"NOITE","data_inicio":"2025-11-01","data_fim":"2026-05-01","id_curso":10,"vagas":30,"createdAt":"2025-10-27T19:28:17.000Z","updatedAt":"2025-10-27T19:28:17.000Z","curso":{"id":10,"nome":"JavaScript Fullstack","carga_horaria":80}},{"id":3,"nome":"Turma Test 1761587926","turno":"NOITE","data_inicio":"2024-01-15","data_fim":"2024-06-15","id_curso":8,"vagas":30,"createdAt":"2025-10-27T17:58:46.000Z","updatedAt":"2025-10-27T17:58:46.000Z","curso":{"id":8,"nome":"Test Course 1761587926","carga_horaria":40}},{"id":2,"nome":"Turma A - JavaScript Avan√ßado","turno":"MANHA","data_inicio":"2024-02-01","data_fim":"2024-07-01","id_curso":7,"vagas":30,"createdAt":"2025-10-27T17:58:30.000Z","updatedAt":"2025-10-27T18:44:10.000Z","curso":{"id":7,"nome":"Test Course 1761587910","carga_horaria":40}}]

TEST 5: Deletar matr√≠cula completamente (deve incrementar vagas)
jq: parse error: Invalid numeric literal at line 1, column 10
Response dele√ß√£o: <!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<title>Error</title>
</head>
<body>
<pre>Cannot DELETE /api/enrollments//</pre>
</body>
</html>
jq: error (at <stdin>:1): Cannot index array with string "data"
Vagas depois de deletar matr√≠cula: 
[0;31m‚ùå FALHOU:[0m Deletar matr√≠cula incrementa vagas (5)
   Esperado: 5
   Recebido: 
   Response: [{"id":1,"nome":"Turma Python 2025-1","turno":"MATUTINO","data_inicio":"2025-01-15","data_fim":"2025-03-15","id_curso":1,"vagas":30,"createdAt":"2025-11-03T06:22:03.000Z","updatedAt":"2025-11-03T06:22:03.000Z","curso":{"id":1,"nome":"Python para Iniciantes","carga_horaria":40}},{"id":5,"nome":"Turma JS 2025 - Noturna","turno":"NOITE","data_inicio":"2025-11-01","data_fim":"2026-05-01","id_curso":10,"vagas":30,"createdAt":"2025-10-27T19:28:17.000Z","updatedAt":"2025-10-27T19:28:17.000Z","curso":{"id":10,"nome":"JavaScript Fullstack","carga_horaria":80}},{"id":3,"nome":"Turma Test 1761587926","turno":"NOITE","data_inicio":"2024-01-15","data_fim":"2024-06-15","id_curso":8,"vagas":30,"createdAt":"2025-10-27T17:58:46.000Z","updatedAt":"2025-10-27T17:58:46.000Z","curso":{"id":8,"nome":"Test Course 1761587926","carga_horaria":40}},{"id":2,"nome":"Turma A - JavaScript Avan√ßado","turno":"MANHA","data_inicio":"2024-02-01","data_fim":"2024-07-01","id_curso":7,"vagas":30,"createdAt":"2025-10-27T17:58:30.000Z","updatedAt":"2025-10-27T18:44:10.000Z","curso":{"id":7,"nome":"Test Course 1761587910","carga_horaria":40}}]

TEST 6: Tentar matricular em turma SEM vagas
mysql: [Warning] Using a password on the command line interface can be insecure.
ERROR 1064 (42000) at line 1: You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '' at line 1
Status ao tentar matricular sem vagas: 500
Response: {"message":"Internal server error"}
[0;31m‚ùå FALHOU:[0m Matr√≠cula sem vagas retorna 400
   Esperado: 400
   Recebido: 500
   Response: {"message":"Internal server error"}

TEST 7: Verificar mensagem de erro correta
[0;31m‚ùå FALHOU:[0m Mensagem de erro n√£o menciona vagas
Mensagem recebida: Internal server error

=========================================
üìä RESULTADOS DOS TESTES
=========================================
[0;32m‚úÖ Testes passados: 0[0m
[0;31m‚ùå Testes falhados: 7[0m
Total: 7

[0;31m‚ùå Alguns testes falharam.[0m
